title: Lapis Console
--
# Консоль Lapis

[Консоль Lapis][1] - интерактивная консоль, встроенная
в веб-приложение. Это отдельный проект, а не часть Lapis.
Поскольку Lapis работает внутри Nginx, не так-то просто
сделать консоль на основе стандартного терминала,
которая вела бы себя как веб-приложение.
Вместо этого консоль запустили прямо в браузере.
Это позволяет при отладке выполнять код, как будто
его выполняет веб-приложение.

![Скриншот](http://leafo.net/dump/lapis_console.png "Скриншот консоли Lapis, в которой работают с объектом.")

Установка консоли Lapis через LuaRocks:

```bash
$ luarocks install --server=http://rocks.moonscript.org lapis-console
```

## Подключение консоли

### `console.make([opts])`

Возвращает обработчик, который можно "посадить" на произвольный путь:

```lua
local lapis = require("lapis")
local console = require("lapis.console")

local app = lapis.Application()

app:match("/console", console.make())

return app
```


```moon
lapis = require "lapis"
console = require "lapis.console"

class extends lapis.Application
  "/console": console.make!
```

Откройте адрес `/console` в браузере.

По умолчанию консоль доступна только
в окружении `"development"`.
Чтобы изменить название окружения, в котором включена
консоль, его надо передать в опции `env` в первом аргументе.
Чтобы включить консоль во всех окружениях,
передайте строку `"all"`.

> Будьте осторожны, когда даёте кому-то доступ к консоли,
> так как злоумышленники с помощью консоли могут
> испортить веб-приложение или скомпрометировать систему.

## Подсказки

В консоли можно писать на MoonScript.
Можно писать программу из нескольких строк.

Функция `print` переопределена в консоли таким образом,
что она печатает свои аргументы в консоль.
Результаты подсвечиваются в зависимости от типа.
Таблицы могут раскрываться.

Все запросы к БД, которые выполняются скриптом,
распечатываются вконце.

В переменной `@` хранится HTTP-запрос,
через который происходит управление консолью.
Этой переменной можно пользоваться для проверки
методов, которым требуется объект-запрос.

[1]: https://github.com/leafo/lapis-console

